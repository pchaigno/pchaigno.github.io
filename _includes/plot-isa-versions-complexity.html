<!--
bpf_lxc:	v3	v2	v1	v1 + alu32	v2 + alu32	ignored
2/1		64	50	51	75		65
2/3		331	281	289	394		476
2/5		522	549	562	598		585
2/4		622	789	797	839		891
2/16		32324	40264	37500	63346		69259
2/18		2799	3272	3281	3005		2994
2/24		20743	11761	11851	37716		37645
2/15		52748	46496	49166	101622		105422
2/17		4170	4983	4972	4756		4731
2/19		24815	17848	17856	46628		26837
2/10		24825	35515	36675	13591		13491
2/7		21462	26682	26959	13223		13067
2/6		202	287	290	294		291
from-container	115	113	114	118		117
2/12		8750	22459	22425	8036		7979
2/14		9283	29521	32402	11800		11746
2/11		21666	44867	45641	24292		24089
2/13		27514	56087	54292	30157		29737
1/0xffff	102	102	103	105		104
to-container	164	166	167	172		171

bpf_host:
2/1		64	50	51	75		65		x
2/5		522	549	562	598		585		x
2/4		622	770	779	820		871		x
2/21		604	612	621	642		630
2/16		32324	40264	37500	63346		69259
2/18		30812	14825	14901	25783		24752
2/24		16340	11991	12054	41838		37780
2/20		610	628	637	603		594
2/15		59782	35393	33840	68278		66658
2/17		22208	14227	14314	16593		16225
2/19		31005	12986	12162	38851		29743
2/23		5800	7645	7700	5925		5849
2/10		36965	43500	43867	37289		37729
2/22		10416	11334	11340	9874		9956
2/7		44448	74380	75675	67566		62511
from-netdev	570	462	462	470		470
from-host	625	621	623	612		568
to-netdev	8687	16552	16907	15493		12942
to-host		22297	31678	35743	23572		21366
-->
<div id="plot-isa-versions-complexity"></div>
<script>
var lxc_programs = ['2/1', '2/3', '2/5', '2/4', '2/16', '2/18', '2/24', '2/15', '2/17', '2/19', '2/10', '2/7', '2/6', 'from-container', '2/12', '2/14', '2/11', '2/13', '1/0ffff', 'to-container'];
var host_programs = ['2/21', '2/16', '2/18', '2/24', '2/20', '2/15', '2/17', '2/19', '2/23', '2/10', '2/22', '2/7', 'from-netdev', 'from-host', 'to-netdev', 'to-host'];
var programs = lxc_programs.map(p => 'bpf_lxc ' + p).concat(host_programs.map(p => 'bpf_host ' + p));
var v1Complexity = {
    x: programs,
    y: [51, 289, 562, 797, 37500, 3281, 11851, 49166, 4972, 17856, 36675, 26959, 290, 114, 22425, 32402, 45641, 54292, 103, 167].concat([621, 37500, 14901, 12054, 637, 33840, 14314, 12162, 7700, 43867, 11340, 75675, 462, 623, 16907, 35743]),
    type: 'bar',
    mode: 'markers',
    name: 'v1',
    marker: {
        color: 'rgb(248, 197, 23)',
    }
};
var v1ALU32Complexity = {
    x: programs,
    y: [75, 394, 598, 839, 63346, 3005, 37716, 101622, 4756, 46628, 13591, 13223, 294, 118, 8036, 11800, 24292, 30157, 105, 172].concat([642, 63346, 25783, 41838, 603, 68278, 16593, 38851, 5925, 37289, 9874, 67566, 470, 612, 15493, 23572]),
    type: 'bar',
    mode: 'markers',
    name: 'v1 + alu32',
    visible: 'legendonly',
    marker: {
        color: 'rgb(248, 197, 23)',
    }
};
var v2Complexity = {
    x: programs,
    y: [50, 281, 549, 789, 40264, 3272, 11761, 46496, 4983, 17848, 35515, 26682, 287, 113, 22459, 29521, 44867, 56087, 102, 166].concat([612, 40264, 14825, 11991, 628, 35393, 14227, 12986, 7645, 43500, 11334, 74380, 462, 621, 16552, 31678]),
    type: 'bar',
    mode: 'markers',
    name: 'v2',
    marker: {
        color: 'rgb(152, 201, 62)',
    }
};
var v2ALU32Complexity = {
    x: programs,
    y: [65, 476, 585, 891, 69259, 2994, 37645, 105422, 4731, 26837, 13491, 13067, 291, 117, 7979, 11746, 24089, 29737, 104, 171].concat([630, 69259, 24752, 37780, 594, 66658, 16225, 29743, 5849, 37729, 9956, 62511, 470, 568, 12942, 21366]),
    type: 'bar',
    mode: 'markers',
    name: 'v2 + alu32',
    visible: 'legendonly',
    marker: {
        color: 'rgb(152, 201, 62)',
    }
};
var v3Complexity = {
    x: programs,
    y: [64, 331, 522, 622, 32324, 2799, 20743, 52748, 4170, 24815, 24825, 21462, 202, 115, 8750, 9283, 21666, 27514, 102, 164].concat([604, 32324, 30812, 16340, 610, 59782, 22208, 31005, 5800, 36965, 10416, 44448, 570, 625, 8687, 22297]),
    type: 'bar',
    mode: 'markers',
    name: 'v3',
    marker: {
        color: 'rgb(98, 138, 198)',
    }
};



plotlyReady(function() {
    var data = [v1Complexity, v1ALU32Complexity, v2Complexity, v2ALU32Complexity, v3Complexity];
    var layout = {
        title: '<b>Complexity for Each Instruction Set Version</b>',
        barmode: 'group',
        legend: {x: 0.02, y: 0.95},
        margin: {t: 80, l: 50, r: 0, b: 80},
        xaxis: {
            title: "Cilium's BPF programs",
            showticklabels: false
        },
        yaxis: {
            tickformat: 's',
            // type: 'log',
            // autorange: true,
        },
        height: 450,
    };
    if (jQuery.browser && jQuery.browser.mobile) {
        layout.dragmode = false;
    }
    Plotly.newPlot('plot-isa-versions-complexity', data, layout);
});
</script>
